<!doctype html>
<html>
    <head>
        <title>Calligraphies numériques</title>
        <style>
* {
    box-sizing: border-box;
}
html,
body {
    margin: 0;
    padding: 0;
    height: 100%;
}
.win {
    height: 99vh;
    max-width: 100vw;
    display: flex;
    justify-content: center;
}
.row {
    display: flex;
}
#main {
    width: 99vh;
    height: 99vh;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
#aside {
    text-align: right;
    }
#main .row {
}
.row img {
    height: 33vh;
    display: block;
}
        </style>
    </head>
    <body>
        <div class="win">
            <aside id="aside">
                <form name="choose">
                    <select name="vue">
                        <option value="ten">Dizaines</option>
                        <option value="unit">Unités</option>
                    </select>
                    <input name="page" id="page" type="range"  min="1" max="100" step="10" />
                </form>
            </aside>
            <main id="main">
                <div class="row">
                    <figure id="figSE"class="hn">
                        <img src="hn07.jpg"/>
                    </figure>
                    <figure id="figS" class="hn">
                        <img src="hn03.jpg"/>
                    </figure>
                    <figure id="figSW" class="hn">
                        <img src="hn09.jpg"/>
                    </figure>
                </div>
                <div class="row">
                    <figure id="figE" class="hn">
                        <img src="hn01.jpg"/>
                    </figure>
                    <figure id="figC" class="hn">
                        <img src="hn05.jpg"/>
                    </figure>
                    <figure id="figW" class="hn">
                        <img src="hn02.jpg"/>
                    </figure>
                </div>
                <div class="row">
                    <figure id="figNE" class="hn">
                        <img src="hn06.jpg"/>
                    </figure>
                    <figure id="figN" class="hn">
                        <img src="hn04.jpg"/>
                    </figure>
                    <figure id="figNW" class="hn">
                        <img src="hn08.jpg"/>
                    </figure>
                </div>
            </main>
        </div>
        <script>
(function () {
const captions = [
    "00",
    "01",
    "02",
    "03",
    "04",
    "05",
    "06",
    "07",
    "08",
    "09",

    "10",
    "11",
    "12",
    "13",
    "14",
    "15",
    "16",
    "17",
    "18",
    "19",

    "20",
    "21",
    "22",
    "23",
    "24",
    "25",
    "26",
    "27",
    "28",
    "29",

    "30",
    "31",
    "32",
    "33",
    "34",
    "35",
    "36",
    "37",
    "38",
    "39",

    "40",
    "41",
    "42",
    "43",
    "44",
    "45",
    "46",
    "47",
    "48",
    "49",

    "50",
    "51",
    "52",
    "53",
    "54",
    "55",
    "56",
    "57",
    "58",
    "59",

    "60",
    "61",
    "62",
    "63",
    "64",
    "65",
    "66",
    "67",
    "68",
    "69",

    "70",
    "71",
    "72",
    "73",
    "74",
    "75",
    "76",
    "77",
    "78",
    "79",

    "80",
    "81",
    "82",
    "83",
    "84",
    "85",
    "86",
    "87",
    "88",
    "89",

    "90",
    "91",
    "92",
    "93",
    "94",
    "95",
    "96",
    "97",
    "98",
    "99",
];
const form = document.forms['choose'];
form.page.focus();

form.update = function() {
    const ids = ['imgE', 'imgW', 'imgS', 'imgN', 'imgC', 'imgNE', 'imgSE', 'imgNW', 'imgSW']
    const vue = form.vue.value;
    const page = form.page.value;
    const url = new URL(window.location);    
    url.search = new URLSearchParams(new FormData(form));
    window.history.pushState({}, '', url);

    if (vue == "unit") {
        const start = page % 10;
        for (let i = 0, len = ids.length; i < len; i++) {
            const id = ids[i];
            document.getElementById(id).src = "hn" + ('' + (( (i + 1) *10) + start)).padStart(2, '0') + '.jpg';
        }
    }
    else {
        const start = 10 * Math.floor(page / 10);
        for (let i = 0, len = ids.length; i < len; i++) {
            const id = ids[i];
            document.getElementById(id).src = "hn" + ('' + (start + i + 1)).padStart(2, '0') + '.jpg';
        }
    }
};

// upadate on load
const urlPars = new URLSearchParams(window.location.search);
form.vue.value = urlPars.get("vue");
form.page.value = urlPars.get("page");
form.update();
// 
form.addEventListener("submit", function(event) {
    form.preventDefault();
    form.update();
}, true);
form.vue.addEventListener("change", function(event) {
    const vue = form.vue.value;
    if (vue == "unit") {
        form.page.value = 0;
        form.page.min = 0;
        form.page.max = 9;
        form.page.step = 1;
    }
    else {
        form.page.value = 1;
        form.page.min = 1;
        form.page.max = 99;
        form.page.step = 10;
    }
    form.page.focus();
    form.update();
}, true);
form.page.addEventListener("change", function(event) {
    form.update();
}, true);

})();
        </script>
    </body>
</html>
