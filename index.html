<!doctype html>
<html>
    <head>
        <title>Hectomancy</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
        <style>
* {
    box-sizing: border-box;
}
html,
body {
    margin: 0;
    padding: 0;
    height: 100%;
    background-color: black;
    color: #fff;
}
body {
    font-family: "Open Sans", sans-serif;
    font-optical-sizing: auto;
    font-style: normal;
    font-size: 12px;
}

.win {
    display: flex;
    justify-content: center;
}

.win form {
    overflow: auto;
    max-height: 100vh;
}

.main {
    height: 100vh;
    flex-shrink: 0;
}

.page {
    /*
    display: flex;
    flex-direction: column;
    justify-content: center;
    */
}

.row {
    display: flex;
    justify-content: center;
}

#main.horizontal img {
    transform: rotate(-90deg);
}

figure.hecto {
    height: 33.3vh;
    margin: 0;
    padding: 0 0.5rem 0 0.5rem;
    display: flex;
    align-items: center;
    background-color: #000;
}

figure.hecto {
    flex-direction: column;
}

figure.hecto > h4 {
    font-size: 16px;
    text-align: center;
    margin: 0;
    padding: 0;
    flex-shrink: 0;
}

figure.hecto > p {
    font-size: 12px;
    text-align: center;
    margin: 0;
    padding: 0;
    flex-shrink: 0;
}

figure.hecto > img {
   max-height: calc(32vh - 3.5rem);
}


figure.hecto button {
    display: none;
}

figure.hecto.modal button {
    display: block;
    position: absolute;
    top: 1rem;
    right: 1rem;
}

figure.hecto.modal img {
    max-height: calc(100% - 2rem);
    max-width: 100%;
}


figure.hecto.modal {
    position: absolute;
    z-index: 10;
    top: 0;
    left: 0;
    height: 100vh;
    width: 100%;
}

/** card backs */
#back {
    display: none;
}

form {
    text-align: center;
}
button {
    font-family: monospace;
}

@page {
    size: A4;
    margin: 0;
}

@media print {
    html, body {
        width: 210mm;
        height: 297mm;
    }
    .page {
        margin: 0;
        padding: 1cm 0 0 0;
        width: 210mm;
        height: 297mm;
    }
    #aside,
    form {
        display: none;
    }
    #back {
        display: block;
    }
    #main,
    #back {
    }
    figure.back,
    figure.hecto {
        height: 3.5in;
        width: 2.5in;
        box-sizing: content-box; /* size without borders */
        margin: 0;
        padding: 0;
        display: flexbox;
        flex-direction: column;
        justify-content: space-between;
    }

    figure.hecto {
        border: 1px solid #ccc;
    }

    figure.hecto img {
        width: 2.3in;
        height: 2.3in;
    }

    figure.hecto {
        position: relative;
    }

    figure.hecto figcaption {
        position: absolute;
        bottom: 4mm;
    }

    figure.hecto > h4 {
        padding-top: 0.2in;
        font-size: 5.5mm;
        font-weight: 100;
    }
    figure.hecto > p {
        padding-bottom: 0.1in;
    }
    figure.back figcaption {
        text-align: center;
        margin-left: -0.07em;
        font-size: 3.5in;
        line-height: 100%;
        font-style: italic;
        font-weight: 100;
        font-family: Garamond, serif;
    }
}



        </style>
        <script src="hectomancy.js">//</script>
    </head>
    <body>
        <div class="win">
            <form name="choose">
                <div>
                    <button type="button" name="set" value="1*">1*</button>
                    <button type="button" name="set" value="*1">*1</button>
                </div>
                <div>
                    <button type="button" name="set" value="2*">2*</button>
                    <button type="button" name="set" value="*2">*2</button>
                </div>
                <div>
                    <button type="button" name="set" value="3*">3*</button>
                    <button type="button" name="set" value="*3">*3</button>
                </div>
                <div>
                    <button type="button" name="set" value="4*">4*</button>
                    <button type="button" name="set" value="*4">*4</button>
                </div>
                <div>
                    <button type="button" name="set" value="5*">5*</button>
                    <button type="button" name="set" value="*5">*5</button>
                </div>
                <div>
                    <button type="button" name="set" value="6*">6*</button>
                    <button type="button" name="set" value="*6">*6</button>
                </div>
                <div>
                    <button type="button" name="set" value="7*">7*</button>
                    <button type="button" name="set" value="*7">*7</button>
                </div>
                <div>
                    <button type="button" name="set" value="8*">8*</button>
                    <button type="button" name="set" value="*8">*8</button>
                </div>
                <div>
                    <button type="button" name="set" value="9*">9*</button>
                    <button type="button" name="set" value="*9">*9</button>
                </div>
                <div>
                    <button type="button" name="set" value="0*">0*</button>
                    <button type="button" name="set" value="*0">*0</button>
                </div>
            </form>
            <main id="main" class="page main">
                <div class="row">
                    <figure id="figSE" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto07.jpg"/>
                        <p></p>
                    </figure>
                    <figure id="figS" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto03.jpg"/>
                        <p></p>
                    </figure>
                    <figure id="figSW" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto09.jpg"/>
                        <p></p>
                    </figure>
                </div>
                <div class="row">
                    <figure id="figE" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto01.jpg"/>
                        <p></p>
                    </figure>
                    <figure id="figC" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto05.jpg"/>
                        <p></p>
                    </figure>
                    <figure id="figW" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto01.jpg"/>
                        <p></p>
                    </figure>
                </div>
                <div class="row">
                    <figure id="figNE" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto06.jpg"/>
                        <p></p>
                    </figure>
                    <figure id="figN" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto04.jpg"/>
                        <p></p>
                    </figure>
                    <figure id="figNW" class="hecto">
                        <h4></h4>
                        <button type="button">×</button>
                        <img src="hecto08.jpg"/>
                        <p></p>
                    </figure>
                </div>
            </main>
            <aside id="back" class="page">
                <div class="row">
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                </div>
                <div class="row">
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                </div>
                <div class="row">
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                    <figure class="back">
                        <figcaption>h</figcaption>
                    </figure>
                </div>
            </aside>
        </div>
        <script>
(function () {
const form = document.forms['choose'];
function display(id, n)
{
    const no = ('' + n).padStart(2, '0');
    const img = document.querySelector("#" + id + " img");
    img.src = "hecto" + no + '.jpg';
    let html = "";
    html += no;
    if (hecto[no]["verb"]) html += ', ' + hecto[no]["verb"];
    document.querySelector("#" + id + " h4").innerHTML = html;
    document.querySelector("#" + id + " p").innerHTML = hecto[no]["image"];
    /*
    const ten = Math.floor(no / 10); 
    const unit = no % 10; 
    for (let i = 0; i < deca.length; i++) {
        html += "<div class=\"line\">";
        html += "<span>" + deca[i][ten] + "</span>";
        html += "<span>" + deca[i][unit] + "</span>";
        html += "</div>\n"; 
    }
    */
}

const ids = ['figW','figE', 'figS', 'figN', 'figC', 'figNE', 'figSE', 'figNW', 'figSW']
for (let i = 0, len = ids.length; i < len; i++) {
    const id = ids[i];
    const figure = document.getElementById(id);
    figure.addEventListener("click", function(event) {
        figure.classList.toggle("modal");
    }, true);
}

function show(pat)
{
    const chars = pat.split("");
    if (chars[0] == '*' && /^[0-9]$/.test(chars[1])) {
        const start = chars[1] % 10;
        for (let i = 0, len = ids.length; i < len; i++) {
            const id = ids[i];
            display(ids[i], ( (i + 1) *10) + start);
        }
    }
    else if (/^[0-9]$/.test(chars[0]) && chars[1] == '*') {
        const start = 10 * Math.floor(chars[0] % 10);
        for (let i = 0, len = ids.length; i < len; i++) {
            display(ids[i], start + i + 1);
        }
    }
    else {
        const lim = Math.min(ids.length, news.length);
        for (let i = 0; i < lim; i++) {
            const id = ids[i];
            display(ids[i], news[i]);
        }
    }

}

const hash = window.location.hash.slice(1);
show(hash);


const buttons = form.querySelectorAll('button');
buttons.forEach(button => {
  button.addEventListener('click', () => {
    history.pushState(null, null, "#" + button.value);
    show(button.value);
  });
});



})();
        </script>
    </body>
</html>
